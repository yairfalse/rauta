# RAUTA Integration Test Configuration

[cluster]
# Cluster provider type: "kind", "k3s", "eks", "aks", "gke", "existing"
type = "kind"
name = "rauta-test"
reuse = true      # Reuse cluster between test runs (faster)
cleanup = true    # Delete resources after tests

# Kind-specific configuration
[cluster.kind]
worker_nodes = 2  # Number of worker nodes (1 control plane + N workers)

# K3s-specific configuration (for extraction to Seppo)
# [cluster.k3s]
# nodes = 3

# EKS-specific configuration (for extraction to Seppo)
# [cluster.eks]
# region = "us-west-2"
# node_count = 2
# instance_type = "t3.medium"

# AKS-specific configuration (for extraction to Seppo)
# [cluster.aks]
# resource_group = "rauta-test"
# node_count = 2
# vm_size = "Standard_DS2_v2"

# GKE-specific configuration (for extraction to Seppo)
# [cluster.gke]
# project = "my-project"
# zone = "us-central1-a"
# node_count = 2
# machine_type = "e2-medium"

# Existing cluster configuration (for extraction to Seppo)
# [cluster.existing]
# kubeconfig_path = "~/.kube/config"
# context = "my-cluster"

[scenarios]
tls_validation = true           # Test TLS certificate validation
basic_routing = false           # Test HTTP routing (TODO)
endpointslice_updates = false   # Test dynamic backend discovery (TODO)
lock_poisoning = false          # Test lock poisoning recovery (TODO)
load_testing = false            # Performance tests (TODO)

[timeouts]
gateway_ready = 60         # Seconds to wait for Gateway to be Ready
route_ready = 30           # Seconds to wait for HTTPRoute to be Accepted
backend_ready = 60         # Seconds to wait for backends to be ready
reconciliation = 10        # Seconds to wait between reconciliation checks

[performance]
tool = "wrk"               # Load testing tool (wrk, vegeta, etc.)
duration_seconds = 30      # Load test duration
connections = 100          # Concurrent connections
threads = 4                # Number of threads
target_rps = 1000          # Target requests per second

[sniffer]
enabled = false            # Enable network packet capture
interface = "eth0"         # Network interface to capture
filter = "tcp port 80 or tcp port 443"  # tcpdump filter
output_dir = "/tmp/rauta-captures"      # Where to save .pcap files
